search:
  context: &context
    $ref: "./context.yaml"
  message:
    intent:
      category:
        descriptor:
          code:
            required: mandatory
            type: string
            owner: BAP
            usage: MUTUAL_FUNDS
            description: Describes  of code value for category
          _description:
            required: Mandatory
            type: object
            owner: BAP
            usage: '--'
            description: >-
              It refers to providing additional details about the
              characteristics, features and attributes of products.
        _description:
          required: Mandatory
          type: object
          owner: BAP
          usage: '--'
          description: Describes the category of the intent.
      _description:
        required: Mandatory
        type: object
        owner: BAP
        usage: '--'
        description: Describe the intent to buy or avail a product or a service.
      tags:
        _description:
          required: mandatory
          type: array
          owner: BAP
          usage: '--'
          description: Label for tag group              
        display:
          required: mandatory
          type: boolean
          owner: BAP
          usage: true
          description: True if BAP has to display the tag content
        descriptor:
          _description:
            required: mandatory
            type: object
            owner: BAP
            usage: '--'
            description: Label for tag group              
          name:
            required: mandatory
            type: string
            owner: BAP
            usage: BAP TERMS OF ENGAGEMENT
            description: Name of the tag group
          code:
            required: mandatory
            type: string
            owner: BAP
            usage: BAP_TERMS
            description: Code of the tag group
      
on_search:
  context: &context
    <<: *context
    bpp_id:
      required: mandatory
      type: string
      owner: BPP
      usage: api.sellerapp.com
      description: Subscriber ID of the seller NP
    bpp_uri:
      required: mandatory
      type: string
      owner: BPP
      usage: https://api.sellerapp.com/ondc
      description: Subscriber URL of seller NP for accepting calls from buyer NPs
  message:
    catalog:
      _description:
        required: Mandatory
        type: object
        owner: BPP
        usage: '--'
        description: >-
          This attribute describes the products or services that are sent as the
          response to the search done by BAP.
      descriptor:
        _description:
          required: Mandatory
          type: object
          owner: BPP
          usage: '--'
          description: >-
            This attribute amplifies the product details. It includes presenting
            a detailed description about the characteristics, features, and
            unique qualities of that particular product.
        name:
          required: mandatory
          type: string
          owner: BPP
          usage: BPP Name
          description: Name of the seller NP who is providing the catalog
      providers:
        _description:
          required: mandatory
          type: object
          owner: BPP
          usage: '--'
          description: >-
            This attribute describes a more detailed and comprehensive
            information that showcases the diverse range of products or services
            offered by the business.
        id:
          required: mandatory
          type: string
          owner: BPP
          usage: db1928f9
          description: ID of the AMC maintained at the seller NP level
        descriptor:
          _description:
            required: Mandatory
            type: object
            owner: BPP
            usage: '--'
            description: This describes the detailed description of the provider
          name:
            required: mandatory
            type: string
            owner: BPP
            usage: ABC Asset Management Company Ltd.
            description: Name of the AMC
          code:
            required: mandatory
            type: string
            owner: BPP
            usage: ABC_MF
            description: Code of the AMC
        categories:
          _description:
            required: Mandatory
            type: object
            owner: BPP
            usage: '--'
            description: Describes the list of categoreies provided by the seller NP
          descriptor:
            _description:
              required: Mandatory
              type: object
              owner: BPP
              usage: '--'
              description: >-
                This refers to a label that can serve as a categorization tag
                for groupiing together a collection of items for easier
                identification and management.          
            name:
              required: mandatory
              type: string
              owner: BPP
              usage: Large Cap
              description: Name of the category
            code:
              required: mandatory
              type: string
              owner: BPP
              usage: LARGE_CAP
              description: Code of the category
          id:
            required: mandatory
            type: string
            owner: BPP
            usage: db1928f9
            description: ID of the item category maintained at the seller NP level
          parent_category_id:
            required: optional
            type: string
            owner: BPP
            usage: 342435ddafd
            description: ID of the parent category in case there is a hierarchy
        items:
          id:
            required: mandatory
            type: string
            owner: BPP
            usage: 1cd4ea25
            description: ID of the scheme / scheme plan
          descriptor:
            name:
              required: mandatory
              type: string
              owner: BPP
              usage: ABC Large Cap Mutual Fund
              description: Name of the item
            code:
              required: mandatory
              type: string
              owner: BPP
              usage: SCHEME_PLAN
              description: Code of the item. Item can be a scheme / scheme plan
          fulfillment_ids:
            required: optional
            type: string
            owner: BPP
            usage: 3bd4ea25
            description: IDs of the associated fulfillments
          category_ids:
            required: optional
            type: string
            owner: BPP
            usage: 4bd4ea25
            description: List of categories that this scheme belongs to
          matched:
            required: optional
            type: boolean
            owner: BPP
            usage: true
            description: Whether this item is an exact match of the request
          parent_item_id:
            required: optional
            type: string
            owner: BPP
            usage: 234dsfs
            description: ID of the scheme that this plan belongs to
          tags:
            display:
              required: mandatory
              type: boolean
              owner: BPP
              usage: true
              description: True if BAP has to display the tag content
            descriptor:
              name:
                required: mandatory
                type: string
                owner: BPP
                usage: Information
                description: Name of the tag group
              code:
                required: mandatory
                type: string
                owner: BPP
                usage: INFORMATION
                description: Code of the tag group
              _description:
                required: Mandatory
                type: object
                owner: BPP
                usage: '--'
                description: Label for tag group              
            list:
              descriptor:
                name:
                  required: mandatory
                  type: string
                  owner: BPP
                  usage: Plan
                  description: Name of the tag
                code:
                  required: mandatory
                  type: string
                  owner: BPP
                  usage: PLAN
                  description: Code of the tag
                _description:
                  required: Mandatory
                  type: object
                  owner: BPP
                  usage: '--'
                  description: Label for tag              
              value:
                required: mandatory
                type: string
                owner: BPP
                usage: REGULAR
                description: Value of the tag
              _description:
                required: mandatory
                type: array
                owner: BPP
                usage: '--'
                description: List of tags
            _description:
              required: mandatory
              type: array
              owner: BPP
              usage: '--'
              description: List of tag groups
          _description:
            required: Mandatory
            type: object
            owner: BAP/BPP
            usage: '--'
            description: >-
              The provider from which the customer wants to place to the order
              from
        fulfillments:
          id:
            required: mandatory
            type: string
            owner: BPP
            usage: 3bd4ea25
            description: ID of the fulfillment to refer in the item
          type:
            required: mandatory
            type: string
            owner: BPP
            usage: SIP
            description: Type of the fulfillment
          tags:
            display:
              required: mandatory
              type: boolean
              owner: BPP
              usage: true
              description: True if BAP has to display the tag content
            descriptor:
              name:
                required: mandatory
                type: string
                owner: BPP
                usage: Thresholds
                description: Name of the tag group
              code:
                required: mandatory
                type: string
                owner: BPP
                usage: THRESHOLDS
                description: Code of the tag group
              _description:
                required: Mandatory
                type: object
                owner: BPP
                usage: '--'
                description: Label for tag group              
            list:
              descriptor:
                name:
                  required: mandatory
                  type: string
                  owner: BPP
                  usage: Amount Minimum
                  description: Name of the tag
                code:
                  required: mandatory
                  type: string
                  owner: BPP
                  usage: AMOUNT_MIN
                  description: Code of the tag
                _description:
                  required: Mandatory
                  type: object
                  owner: BPP
                  usage: '--'
                  description: Label for tag              
              value:
                required: mandatory
                type: string
                owner: BPP
                usage: 500
                description: Value of the tag
              _description:
                required: mandatory
                type: array
                owner: BPP
                usage: '--'
                description: List of tags
            _description:
              required: mandatory
              type: array
              owner: BPP
              usage: '--'
              description: List of tag groups
          _description:
            required: mandatory
            type: object
            owner: BPP
            usage: '--'
            description: >-
              This refers to the decription as to how that order will
              rendered/fulfilled to the end-customers.
      tags:
        _description:
          required: mandatory
          type: array
          owner: BAP/BPP
          usage: '--'
          description: Label for tag group              
        display:
          required: mandatory
          type: boolean
          owner: BAP/BPP
          usage: true
          description: True if BAP has to display the tag content
        descriptor:
          _description:
            required: mandatory
            type: object
            owner: BAP/BPP
            usage: '--'
            description: Label for tag group              
          name:
            required: mandatory
            type: string
            owner: BAP/BPP
            usage: BPP TERMS OF ENGAGEMENT
            description: Name of the tag group
          code:
            required: mandatory
            type: string
            owner: BAP/BPP
            usage: BPP_TERMS
            description: Code of the tag group

select:
  context: *context
  message:
    order:
      _description:
        required: mandatory
        type: object
        owner: BAP/BPP
        usage: '--'
        description: >-
          This refers to the complete description of the legal contract created
          between the buyer and the seller.
      type:
        required: mandatory
        type: string
        owner: BAP
        usage: 'PURCHASE'
        description: Type of order being placed
      provider: &provider
        id:
          required: mandatory
          type: string
          owner: BPP
          usage: 2a434adf
          description: ID of the provider whose item is chosen, as received in the catalog
        _description:
          required: mandatory
          type: object
          owner: BPP
          usage: '--'
          description: MF provider details
      items: &items_input
        _description:
          required: mandatory
          type: object
          owner: BAP/BPP
          usage: '--'
          description: List of mf schemes in an order
        id:
          required: mandatory
          type: string
          owner: BPP
          usage: 98dgwr41
          description: ID of the item that is chosen, as received in the catalog
        fulfillment_ids:
          required: optional
          type: string
          owner: BPP
          usage: 3bd4ea25
          description: Unique reference ID to the fulfillment of an order
        quantity:
          _description:
            required: mandatory
            type: object
            owner: BAP
            usage: '--'
            description: Describes the quantity assocaited with the item
          selected:
            _description:
              required: mandatory
              type: object
              owner: BAP
              usage: '--'
              description: Describes the selected quantity assocaited with the item
            measure:
              _description:
                required: mandatory
                type: object
                owner: BAP
                usage: '--'
                description: Describes the measure of the selected quantity
              value:
                required: mandatory
                type: integer
                owner: BAP
                usage: '3000'
                description: Value of order
              unit:
                required: mandatory
                type: string
                owner: BAP
                usage: 'amount'
                description: Type of the value of order
        time:
          _description:
            required: optional
            type: object
            owner: BAP
            usage: '--'
            description: Time associated for recurring orders
          schedule:
            _description:
              required: optional
              type: object
              owner: BAP
              usage: '--'
              description: Schedule of the recurring orders
            frequency:
              required: optional
              type: string
              owner: BAP
              usage: '--'
              description: Frequency of the recurring orders in ISO8601 format
      fulfillments: &fulfillments
        _description:
          required: mandatory
          type: object
          owner: BAP
          usage: '--'
          description: Fulfillment details
        type:
          required: mandatory
          type: string
          owner: BPP
          usage: SIP
          description: Type of the fulfillment chosen
        id:
          required: mandatory
          type: string
          owner: BPP
          usage: 45af324fs
          description: ID of the fulfillment chosen
        customer: &customer_select
          _description:
            required: mandatory
            type: object
            owner: BAP
            usage: '--'
            description: >-
              This refers to the description of the person that will ulitmately
              receive the order.
          person:
            id:
              required: mandatory
              type: string
              owner: BAP
              usage: pan:arrpp7771n
              description: Investor identifier in the format "pan:`pan_number`"
            _description:
              required: mandatory
              type: object
              owner: BAP
              usage: '--'
              description: >-
                This refers to the description of the associated person as an
                individual entity.
        agent:
          _description:
            required: mandatory
            type: object
            owner: BAP
            usage: '--'
            description: The agent that is currently handling the fulfillment of the order
          person:
            _description:
              required: optional
              type: object
              owner: BAP
              usage: '--'
              description: Describes a person as any individual
            id:
              required: optional
              type: string
              owner: BAP
              usage: euin:e1234
              description: EUIN of the distributor employee
          organization:
            _description:
              required: mandatory
              type: object
              owner: BAP
              usage: '--'
              description: Distributor organization details
            creds:
              _description:
                required: mandatory
                type: object
                owner: BAP
                usage: '--'
                description: Distributor license details
              id:
                required: mandatory
                type: string
                owner: BAP
                usage: ARN-123456
                description: Distributor license number
              type:
                required: mandatory
                type: string
                owner: BAP
                usage: ARN
                description: Distributor license type
      xinput: &xinput_w_submission_id
        _description:
          required: optional
          type: object
          owner: BAP/BPP
          usage: '--'
          description: >-
            This attribute refers to the information about additional input
            required from the customer to confirm this order.
        form:
          _description:
            required: optional
            type: object
            owner: BPP
            usage: '--'
            description: >-
              This attribute refers to the information about additional input
              form generated from the system.
          id:
            required: optional
            type: string
            owner: BPP
            usage: d097c2f5
            description: This refers to the unique id of the form
        form_response:
          _description:
            required: optional
            type: object
            owner: BPP
            usage: '--'
            description: Form response details
          submission_id:
            required: optional
            type: string
            owner: BPP
            usage: d097c2f5
            description: Submission id of the form submission
on_select:
  context: *context
  message:
    order:
      _description:
        required: Mandatory
        type: object
        owner: BAP/BPP
        usage: '--'
        description: >-
          This refers to the complete description of the legal contract created
          between the buyer and the seller.
      type:
        required: mandatory
        type: string
        owner: BAP
        usage: 'PURCHASE'
        description: Type of order being placed
      provider: *provider
      items: *items_input
      fulfillments: *fulfillments
      xinput:
        _description:
          required: optional
          type: object
          owner: BAP/BPP
          usage: '--'
          description: >-
            This attribute refers to the information about additional input
            required from the customer to confirm this order.
        head:
          _description:
            required: optional
            type: object
            owner: BPP
            usage: '--'
            description: >-
              This refers to the header information of the input of additional
              information required from the customer to avail this item.
          index:
            _description:
              required: optional
              type: object
              owner: BPP
              usage: '--'
              description: >-
                It refers to the integer value of the index number of required
                additional input.
            min:
              required: optional
              type: number
              owner: BPP
              usage: false
              description: Describes the min indexvalue
            max:
              required: optional
              type: number
              owner: BPP
              usage: 1
              description: Describes the max index value
            cur:
              required: optional
              type: number
              owner: BPP
              usage: 1
              description: Describes the current index value
          headings:
            required: optional
            type: array
            owner: BPP
            usage: New Folio
            description: Describes the headings of the form.
        form:
          _description:
            required: optional
            type: object
            owner: BPP
            usage: '--'
            description: >-
              This attribute refers to the information about additional input
              form generated from the system.
          mime_type:
            required: optional
            type: string
            owner: BPP
            usage: text/html
            description: 'Describes the mime of the form'
          url:
            required: optional
            type: string
            owner: BPP
            usage: https://6vs8xnx5i7.abcmf.co.in/mf-kyc/xinput/formid/a23f2fdfbbb8ac402bfd54f
            description: 'Describes the url of the document'
          id:
            required: optional
            type: string
            owner: BPP
            usage: d097c2f5
            description: This refers to the unique id of the form
        form_response:
          _description:
            required: optional
            type: object
            owner: BPP
            usage: '--'
            description: Form response details
          submission_id:
            required: optional
            type: string
            owner: BPP
            usage: d097c2f5
            description: Submission id of the form submission
          status:
            required: optional
            type: string
            owner: BPP
            usage: SUCCESS
            description: Status of the form submission
        required:
          required: optional
          type: boolean
          owner: BPP
          usage: true
          description: >-
            Indicates whether the form data is mandatorily required by the BPP
            to confirm the order.
      payments: &payments_onselect
        _description:
          required: optional
          type: list
          owner: BPP
          usage: '--'
          description: List of payment options for this order
        id:
          required: optional
          type: string
          owner: BPP
          usage: pmt_1
          description: Payment option identifier
        collected_by:
          required: optional
          type: string
          owner: BPP
          usage: BPP
          description: Who is collecting the payment
        type:
          required: optional
          type: string
          owner: BPP
          usage: PRE_FULFILLMENT
          description: When is the payment to be collected
        tags:
          _description:
            required: optional
            type: array
            owner: BPP
            usage: '--'
            description: Additional information related to the payment option
          display:
            required: optional
            type: boolean
            owner: BPP
            usage: true
            description: True if BAP has to display the tag content
          descriptor:
            _description:
              required: optional
              type: object
              owner: BPP
              usage: '--'
              description: Label for tag group              
            name:
              required: optional
              type: string
              owner: BPP
              usage: Payment Method
              description: Name of the tag group
            code:
              required: optional
              type: string
              owner: BPP
              usage: PAYMENT_METHOD
              description: Code of the tag group
          list:
            _description:
              required: optional
              type: array
              owner: BPP
              usage: '--'
              description: List of tags
            descriptor:
              _description:
                required: optional
                type: object
                owner: BPP
                usage: '--'
                description: Label for tag              
              name:
                required: optional
                type: string
                owner: BPP
                usage: Mode of payment
                description: Name of the tag
              code:
                required: optional
                type: string
                owner: BPP
                usage: MODE
                description: Code of the tag
            value:
              required: optional
              type: string
              owner: BPP
              usage: MANDATE_REGISTRATION
              description: Value of the tag
      documents: &tnc_docs
        _description:
          required: optional
          type: list
          owner: BPP
          usage: '--'
          description: Documents related to the order. eg. Terms and conditions
        descriptor:
          _description:
            required: optional
            type: object
            owner: BPP
            usage: '--'
            description: Document descriptor
          name:
            required: optional
            type: string
            owner: BPP
            usage: 'Terms and Conditions'
            description: Name of the document
          code:
            required: optional
            type: string
            owner: BPP
            usage: 'TERMS'
            description: Code to identify the document
        url:
          required: optional
          type: string
          owner: BPP
          usage: 'https://api.sellerapp.com/tnc'
          description: URL to fetch the document from
        mime_type:
          required: optional
          type: string
          owner: BPP
          usage: text/html
          description: Mime type of the document to be fetched from the URL

init:
  context: *context
  message:
    order:
      _description:
        required: Mandatory
        type: object
        owner: BAP/BPP
        usage: '--'
        description: >-
          This refers to the complete description of the legal contract created
          between the buyer and the seller.
      provider: *provider
      type:
        required: mandatory
        type: string
        owner: BAP
        usage: 'PURCHASE'
        description: Type of order being placed
      items: *items_input
      fulfillments: &fulfillments_with_2fa
        <<: *fulfillments
        customer:
          <<: *customer_select
          contact:
            _description:
              required: mandatory
              type: object
              owner: BAP
              usage: '--'
              description: Customer contact information on which 2fa is done
            phone:
              required: mandatory
              type: string
              owner: BAP
              usage: '9916587487'
              description: Phone number of the customer on which 2fa is done
      xinput: *xinput_w_submission_id
      payments: &payments_with_source_bank
        <<: *payments_onselect
        params:
          _description:
            required: optional
            type: object
            owner: BAP/BPP
            usage: '--'
            description: payment related parameters
          amount:
            required: optional
            type: integer
            owner: BAP/BPP
            usage: 30000
            description: mandate limit if new mandate registration
          currency:
            required: optional
            type: string
            owner: BAP/BPP
            usage: 'inr'
            description: currency of the amount, if mandate limit is given
          source_bank_code:
            required: optional
            type: string
            owner: BAP
            usage: 'icic0000047'
            description: ifsc code of the investor bank a/c from which he wants to make the payment
          source_bank_account_number:
            required: optional
            type: string
            owner: BAP
            usage: '004875487458'
            description: bank a/c number of the investor from which he wants to make the payment
          source_bank_account_name:
            required: optional
            type: string
            owner: BAP
            usage: 'Harish Gupta'
            description: Name on the bank a/c of the investor from which he wants to make the payment
      documents: *tnc_docs
on_init:
  context: *context
  message:
    order:
      _description:
        required: Mandatory
        type: object
        owner: BAP/BPP
        usage: '--'
        description: >-
          This refers to the complete description of the legal contract created
          between the buyer and the seller.
      id:
        required: mandatory
        type: string
        owner: BPP
        usage: '54adfadsf6144'
        description: ID of the order at the seller app end
      status:
        required: mandatory
        type: string
        owner: BAP
        usage: 'CREATED'
        description: Status of the order at seller app end
      provider: *provider
      type:
        required: mandatory
        type: string
        owner: BAP
        usage: 'PURCHASE'
        description: Type of order being placed
      items: *items_input
      fulfillments: *fulfillments_with_2fa
      xinput: *xinput_w_submission_id
      payments: &payments_with_url
        <<: *payments_with_source_bank
        url:
          required: optional
          type: string
          owner: BPP
          usage: 'https://api.sellerapp.com/pay'
          description: payment url for the selected payment mode
        status:
          required: optional
          type: string
          owner: BPP
          usage: 'NOT-PAID'
          description: status of the payment
      documents: *tnc_docs

confirm:
  context: *context
  message:
    order:
      _description:
        required: Mandatory
        type: object
        owner: BAP/BPP
        usage: '--'
        description: >-
          This refers to the complete description of the legal contract created
          between the buyer and the seller.
      id:
        required: mandatory
        type: string
        owner: BPP
        usage: '54adfadsf6144'
        description: ID of the order at the seller app end
      provider: *provider
      type:
        required: mandatory
        type: string
        owner: BAP
        usage: 'PURCHASE'
        description: Type of order being placed
      items: *items_input
      fulfillments: *fulfillments_with_2fa
      xinput: *xinput_w_submission_id
      payments: *payments_with_url
      documents: *tnc_docs
on_confirm:
  context: *context
  message:
    order:
      _description:
        required: Mandatory
        type: object
        owner: BAP/BPP
        usage: '--'
        description: >-
          This refers to the complete description of the legal contract created
          between the buyer and the seller.
      id:
        required: mandatory
        type: string
        owner: BPP
        usage: '54adfadsf6144'
        description: ID of the order at the seller app end
      status:
        required: mandatory
        type: string
        owner: BAP
        usage: 'ACCEPTED'
        description: Status of the order at seller app end
      provider: *provider
      type:
        required: mandatory
        type: string
        owner: BAP
        usage: 'PURCHASE'
        description: Type of order being placed
      items: *items_input
      fulfillments: *fulfillments_with_2fa
      xinput: *xinput_w_submission_id
      payments: *payments_with_url
      documents: *tnc_docs

on_status:
  context: *context
  message:
    order:
      _description:
        required: Mandatory
        type: object
        owner: BAP/BPP
        usage: '--'
        description: >-
          This refers to the complete description of the legal contract created
          between the buyer and the seller.
      id:
        required: mandatory
        type: string
        owner: BPP
        usage: '54adfadsf6144'
        description: ID of the order at the seller app end
      status:
        required: mandatory
        type: string
        owner: BAP
        usage: 'ACCEPTED'
        description: Status of the order at seller app end
      provider: *provider
      type:
        required: mandatory
        type: string
        owner: BAP
        usage: 'PURCHASE'
        description: Type of order being placed
      items: *items_input
      fulfillments:
        <<: *fulfillments
        customer:
          <<: *customer_select
          contact:
            _description:
              required: optional
              type: object
              owner: BAP
              usage: '--'
              description: Customer contact information on which 2fa is done
            phone:
              required: optional
              type: string
              owner: BAP
              usage: '9916587487'
              description: Phone number of the customer on which 2fa is done
      xinput: *xinput_w_submission_id
      payments: *payments_with_url
      documents: *tnc_docs
