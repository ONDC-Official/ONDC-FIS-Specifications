summary: Purchase Finance
details:
  - description: Discovery of Funds
    mermaid: >-
      sequenceDiagram
        title Personal Loan Discovery
        Borrower Platform (BAP)->>Gateway (BG): search
        Gateway (BG) ->> Borrower Platform (BAP): ACK
        Gateway (BG)->>Registry: Lookup Lender Platforms (lookup)
        Registry->>Gateway (BG): List of Lender Platforms (200 OK)
        Gateway (BG)->>Lender Platform(BPP): search
        Lender Platform(BPP)->>Gateway (BG) : ACK
        Lender Platform(BPP)->>Borrower Platform (BAP): Publish Catalog of Lender 1 (on_search)
        Borrower Platform (BAP)->>Lender Platform(BPP): ACK
  - description: Ordering
    mermaid: >-
      sequenceDiagram
        title  Selection
        participant Borrower Platform (BAP)
        participant Lender Platform (BPP)
        participant Lender Form Service
        Borrower Platform (BAP)->>Lender Form Service: Get Form(Org Form)
        Lender Form Service-->>Borrower Platform (BAP): Form Received
        Borrower Platform (BAP)->>Lender Form Service: Form Submission
        Lender Form Service-->>Borrower Platform (BAP): Submission ID
        Borrower Platform (BAP)->>Lender Platform (BPP): select(with submissionID)
        Lender Platform (BPP)-->>Borrower Platform (BAP):ACK
        Lender Platform (BPP)->>Borrower Platform (BAP):on_select
        Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
  - description: Initializing the order
    mermaid: >-
      sequenceDiagram
        title Initializing Order
        participant Borrower Platform (BAP)
        participant Lender Platform (BPP)
        participant Lender Form Service
        Borrower Platform (BAP)->>Lender Form Service: Get Form(KYC)
        Lender Form Service-->>Borrower Platform (BAP): Form Received
        Borrower Platform (BAP)->>Lender Form Service: Form Submission
        Lender Form Service-->>Borrower Platform (BAP): Submission ID
        Borrower Platform (BAP)->>Lender Platform (BPP): init(with submissionID)
        Lender Platform (BPP)-->>Borrower Platform (BAP):ACK
        Lender Platform (BPP)->>Borrower Platform (BAP):on_init
        Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
  - description: Order Confirmation
    mermaid: >-
      sequenceDiagram
        title Order Confirmation
        participant Borrower Platform (BAP)
        participant Lender Platform (BPP)
        participant Lender Form Service
        Borrower Platform (BAP)->>Lender Form Service: Get Form(Loan agreement)
        Lender Form Service-->>Borrower Platform (BAP): Form Received
        Borrower Platform (BAP)->>Lender Form Service: Form Submission
        Lender Form Service-->>Borrower Platform (BAP): Submission ID
        Borrower Platform (BAP)->>Lender Platform (BPP): confirm(with submissionID)
        Lender Platform (BPP)-->>Borrower Platform (BAP):ACK
        Lender Platform (BPP)->>Borrower Platform (BAP):on_confirm
        Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
  - description: Fulfillment
    mermaid: >-
      sequenceDiagram
        title MF Ordering - Order Fulfillment
        participant Borrower Platform (BAP)
        participant Lender Platform (BPP)
        Borrower Platform (BAP)->>Lender Platform (BPP): status-Request loan application status
        Lender Platform (BPP)-->>Borrower Platform (BAP):ACK
        Lender Platform (BPP)->>Borrower Platform (BAP):on_status - Provide loan application status
        Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
references: if any
steps:
  - summary: User search for available personal loan services.
    api: search
    details:
      - description: User explore loan options by searching for personal loan services over the network
        mermaid: >-
          sequenceDiagram
            title Personal Loan Discovery
            rect rgb(191, 223, 255)
            Borrower Platform (BAP)->>Gateway (BG): search
            Gateway (BG) ->> Borrower Platform (BAP): ACK
            Gateway (BG)->>Registry: Lookup Lender Platforms (lookup)
            Registry->>Gateway (BG): List of Lender Platforms (200 OK)
            Gateway (BG)->>Lender Platform(BPP): search
            Lender Platform(BPP)->>Gateway (BG) : ACK
            end
            Lender Platform(BPP)->>Borrower Platform (BAP): Publish Catalog of Lender 1 (on_search)
            Borrower Platform (BAP)->>Lender Platform(BPP): ACK
    reference: if any
    example:
      value:
        $ref: "../../examples/personal-loans/search/search-request_pf_1.yaml"
  - summary: The lender offers a static catalog details of loan types like personal loans, gst-based loans etc.
    api: on_search
    details:
      - description: The lender platform provides a comprehensive catalog of various loan types including personal loans.
        mermaid: >-
          sequenceDiagram
            title Personal Loan Discovery
            Borrower Platform (BAP)->>Gateway (BG): search
            Gateway (BG) ->> Borrower Platform (BAP): ACK
            Gateway (BG)->>Registry: Lookup Lender Platforms (lookup)
            Registry->>Gateway (BG): List of Lender Platforms (200 OK)
            Gateway (BG)->>Lender Platform(BPP): search
            Lender Platform(BPP)->>Gateway (BG) : ACK
            rect rgb(191, 223, 255)
            Lender Platform(BPP)->>Borrower Platform (BAP): Publish Catalog of Lender 1 (on_search)
            Borrower Platform (BAP)->>Lender Platform(BPP): ACK
            end
    reference: if any
    example:
      value:
        $ref: "../../examples/personal-loans/on_search/on_search-request-pf_1.yaml"
  - summary: The borrower receives the personal loan application form from lender after providing all details like PAN, mobile number, name, address, date of birth, salary, employment type and company name.
    api: form
    details:
      - description: The lender platform sends the application form for the personal loan to the borrower.
        mermaid: >-
          sequenceDiagram
            title  Selection
            participant Borrower Platform (BAP)
            participant Lender Platform (BPP)
            participant Lender Form Service
            rect rgb(191, 223, 255) 
            Borrower Platform (BAP)->>Lender Form Service: Get Form(personal loan)
            Lender Form Service-->>Borrower Platform (BAP): Form Received
            Borrower Platform (BAP)->>Lender Form Service: Form Submission
            Lender Form Service-->>Borrower Platform (BAP): Submission ID
            end
            Borrower Platform (BAP)->>Lender Platform (BPP): search(with submissionID)
            Lender Platform (BPP)-->>Borrower Platform (BAP):ACK
            Lender Platform (BPP)->>Borrower Platform (BAP):on_search
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
    reference: if any
    example:
      value: 
        $ref: ../../examples/personal-loans/forms/loan-application-form_pf.html
  
  #second search
  - summary: Find suitable personal loan services.
    api: search
    details:
      - description: Explore available personal loan options by conducting search.
        mermaid: >-
          sequenceDiagram
            title  Selection
            participant Borrower Platform (BAP)
            participant Lender Platform (BPP)
            participant Lender Form Service
            Borrower Platform (BAP)->>Lender Form Service: Get Form(personal loan)
            Lender Form Service-->>Borrower Platform (BAP): Form Received
            Borrower Platform (BAP)->>Lender Form Service: Form Submission
            Lender Form Service-->>Borrower Platform (BAP): Submission ID
            rect rgb(191, 223, 255) 
            Borrower Platform (BAP)->>Lender Platform (BPP): search(with submissionID)
            Lender Platform (BPP)-->>Borrower Platform (BAP):ACK
            end
            Lender Platform (BPP)->>Borrower Platform (BAP):on_search
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
    reference: if any
    example:
      value:
        $ref: "../../examples/personal-loans/search/search-request_pf_2.yaml"
  - summary: Provides a catalog of different loan products offered by a single lender for personal loans.
    api: on_search
    details:
      - description: The lender platform provides a comprehensive catalog of various loan types including personal loans.
        mermaid: >-
          sequenceDiagram
              title  Selection
              participant Borrower Platform (BAP)
              participant Lender Platform (BPP)
              participant Lender Form Service
              Borrower Platform (BAP)->>Lender Form Service: Get Form(personal loan)
              Lender Form Service-->>Borrower Platform (BAP): Form Received
              Borrower Platform (BAP)->>Lender Form Service: Form Submission
              Lender Form Service-->>Borrower Platform (BAP): Submission ID
              Borrower Platform (BAP)->>Lender Platform (BPP): search(with submissionID)
              Lender Platform (BPP)-->>Borrower Platform (BAP):ACK
              rect rgb(191, 223, 255) 
              Lender Platform (BPP)->>Borrower Platform (BAP):on_search
              Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
              end
    reference: if any
    example:
      value:
        $ref: "../../examples/personal-loans/on_search/on_search-request-pf_2.yaml"
  #third search
 
  - summary: Find suitable personal loan services.
    api: search
    details:
      - description: Explore available personal loan options by conducting search.
        mermaid: >-
          sequenceDiagram
            title  Selection
            participant Borrower Platform (BAP)
            participant Lender Platform (BPP)
            rect rgb(191, 223, 255) 
            Borrower Platform (BAP)->>Lender Platform (BPP): search
            Lender Platform (BPP)-->>Borrower Platform (BAP):ACK
            end
            Lender Platform (BPP)->>Borrower Platform (BAP):on_search
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
    reference: if any
    example:
      value:
        $ref: "../../examples/personal-loans/search/search-request_pf_3.yaml"
  - summary: Provides a catalog of different loan products offered by a single lender for personal loans.
    api: on_search
    details:
      - description: The lender platform provides a comprehensive catalog of various loan types including personal loans.
        mermaid: >-
          sequenceDiagram
            title  Selection
            participant Borrower Platform (BAP)
            participant Lender Platform (BPP)
            Borrower Platform (BAP)->>Lender Platform (BPP): search
            Lender Platform (BPP)-->>Borrower Platform (BAP):ACK
            rect rgb(191, 223, 255) 
            Lender Platform (BPP)->>Borrower Platform (BAP):on_search
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
            end
    reference: if any
    example:
      value:
        $ref: "../../examples/personal-loans/on_search/on_search-request-pf_3.yaml"
  