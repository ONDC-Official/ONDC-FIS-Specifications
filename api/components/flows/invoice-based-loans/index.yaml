summary: Invoice Based Loans
details:
  - description: Discovery of Funds
    mermaid: >-
      sequenceDiagram
        title Invoice Based Loan Discovery
        Borrower Platform (BAP)->>Gateway (BG): search
        Gateway (BG) ->> Borrower Platform (BAP): ACK
        Gateway (BG)->>Registry: Lookup Lender Platforms (lookup)
        Registry->>Gateway (BG): List of Lender Platforms (200 OK)
        Gateway (BG)->>Lender Platform (BPP): search
        Lender Platform (BPP)->>Gateway (BG) : ACK
        Lender Platform (BPP)->>Borrower Platform (BAP): Publish Catalog of Lender 1 (on_search)
        Borrower Platform (BAP)->>Lender Platform (BPP): ACK
  - description: Ordering
    mermaid: >-
      sequenceDiagram
        title  Selection
        participant Borrower Platform (BAP)
        participant Lender Platform (BPP)
        participant Lender Lender Form Service
        Borrower Platform (BAP)->>Lender Lender Form Service: Get Form(Loan amount)
        Lender Form Service-->>Borrower Platform (BAP): Form Received
        Borrower Platform (BAP)->>Lender Form Service: Form Submission
        Lender Form Service-->>Borrower Platform (BAP): Submission ID 
        Borrower Platform (BAP)->>Lender Platform (BPP): select(with submissionID)
        Lender Platform (BPP)-->>Borrower Platform (BAP):ACK
        Lender Platform (BPP)->>Borrower Platform (BAP):on_select
        Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
  - description: Initializing the order 
    mermaid: >-
      sequenceDiagram
        title Initializing Order
        participant Borrower Platform (BAP)
        participant Lender Platform (BPP)
        participant Lender Form Service
        Borrower Platform (BAP)->>Lender Form Service: Get Form(KYC)
        Lender Form Service-->>Borrower Platform (BAP): Form Received
        Borrower Platform (BAP)->>Lender Form Service: Form Submission
        Lender Form Service-->>Borrower Platform (BAP): Submission ID
        Borrower Platform (BAP)->>Lender Platform (BPP): init(with submissionID)
        Lender Platform (BPP)-->>Borrower Platform (BAP):ACK
        Lender Platform (BPP)->>Borrower Platform (BAP):on_init
        Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
  - description: Order Confirmation 
    mermaid: >-
      sequenceDiagram
        title  Order Confirmation
        participant Borrower Platform (BAP)
        participant Lender Platform (BPP)
        participant Lender Form Service
        Borrower Platform (BAP)->>Lender Form Service: Get Form(Loan agreement)
        Lender Form Service-->>Borrower Platform (BAP): Form Received
        Borrower Platform (BAP)->>Lender Form Service: Form Submission
        Lender Form Service-->>Borrower Platform (BAP): Submission ID
        Borrower Platform (BAP)->>Lender Platform (BPP): confirm(with submissionID)
        Lender Platform (BPP)-->>Borrower Platform (BAP):ACK
        Lender Platform (BPP)->>Borrower Platform (BAP):on_confirm
        Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
  - description: Fulfillment  
    mermaid: >-
      sequenceDiagram
        title MF Ordering - Order Fulfillment
        participant Borrower Platform (BAP)
        participant Lender Platform (BPP)
        Borrower Platform (BAP)->>Lender Platform (BPP): status-Request loan application status
        Lender Platform (BPP)-->>Borrower Platform (BAP):ACK
        Lender Platform (BPP)->>Borrower Platform (BAP):on_status - Provide loan application status
        Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
references: if any
steps:
  - summary: Find suitable invoice based loan services over the network.
    api: search
    details:
      - description: Explore available invoice based loan options by conducting search over the network.
        mermaid: >-
          sequenceDiagram
            title Invoice Based Loan Discovery
            rect rgb(191, 223, 255) 
            Borrower Platform (BAP)->>Gateway (BG): search
            Gateway (BG) ->> Borrower Platform (BAP): ACK
            Gateway (BG)->>Registry: Lookup Lender Platforms (lookup)
            Registry->>Gateway (BG): List of Lender Platforms (200 OK)
            Gateway (BG)->>Lender Platform (BPP): search
            Lender Platform (BPP)->>Gateway (BG) : ACK
            end
            Lender Platform (BPP)->>Borrower Platform (BAP): Publish Catalog of Lender 1 (on_search)
            Borrower Platform (BAP)->>Lender Platform (BPP): ACK
    reference: if any
    example:
      value:
        $ref: "../../examples/invoice-based-loans/search/search-request.yaml"
  - summary: Provides a catalog of different loan products offered by a single lender for invoice based loans.
    api: on_search
    details:
      - description: The lender platform provides a comprehensive catalog of various loan types including invoice based loans.
        mermaid: >-
          sequenceDiagram
            title Invoice Based Loan Discovery
            Borrower Platform (BAP)->>Gateway (BG): search
            Gateway (BG) ->> Borrower Platform (BAP): ACK
            Gateway (BG)->>Registry: Lookup Lender Platforms (lookup)
            Registry->>Gateway (BG): List of Lender Platforms (200 OK) 
            Gateway (BG)->>Lender Platform (BPP): search
            Lender Platform (BPP)->>Gateway (BG) : ACK
            rect rgb(191, 223, 255) 
            Lender Platform (BPP)->>Borrower Platform (BAP): Publish Catalog of Lender 1 (on_search)
            Borrower Platform (BAP)->>Lender Platform (BPP): ACK
            end
    reference: if any
    example:
      value:
        $ref: "../../examples/invoice-based-loans/on_search/on_search-request.yaml"
  - summary: Borrower fetches the Invoice based Org form.
    api: form
    details:
      - description: Lender platform sends the form for Invoice based loan to get all the relevant details like UDYAM, contact, GSTIN profile, GSTR1, GSTRA2, GSTR3B.
        mermaid: >-
          sequenceDiagram
            title  Invoice Based Loan Discovery
            participant Borrower Platform (BAP)
            participant Lender Platform (BPP)
            participant Lender Form Service
            rect rgb(191, 223, 255)
            Borrower Platform (BAP)->>Lender Form Service: Get Form
            Lender Form Service-->>Borrower Platform (BAP): Form Received
            Borrower Platform (BAP)->>Lender Form Service: Form Submission
            Lender Form Service-->>Borrower Platform (BAP): Submission ID
            end
            Borrower Platform (BAP)->>Lender Platform (BPP): search(with submissionID)
            Lender Platform (BPP)-->>Borrower Platform (BAP):ACK
            Lender Platform (BPP)->>Borrower Platform (BAP):on_search
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
    reference: if any
    example:
      value: 
        $ref: ../../examples/invoice-based-loans/forms/invoice-based-loans-org-info.html

   #second select form
  - summary: Find suitable invoice based loan services.
    api: search
    details:
      - description: Explore available invoice based loan options by conducting search.
        mermaid: >-
          sequenceDiagram
            title  Invoice Based Loan Discovery
            participant Borrower Platform (BAP)
            participant Lender Platform (BPP)
            participant Lender Form Service
            Borrower Platform (BAP)->>Lender Form Service: Get Form
            Lender Form Service-->>Borrower Platform (BAP): Form Received
            Borrower Platform (BAP)->>Lender Form Service: Form Submission
            Lender Form Service-->>Borrower Platform (BAP): Submission ID
            rect rgb(191, 223, 255)
            Borrower Platform (BAP)->>Lender Platform (BPP): search(with submissionID)
            Lender Platform (BPP)-->>Borrower Platform (BAP):ACK
            end
            Lender Platform (BPP)->>Borrower Platform (BAP):on_search
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
    reference: if any
    example:
      value:
        $ref: "../../examples/invoice-based-loans/search/search_request_1.yaml"
  - summary: Provides a catalog of different loan products offered by a single lender for invoice based loans.
    api: on_search
    details:
      - description: The lender platform provides a comprehensive catalog of various loan types including invoice based loans.
        mermaid: >-
          sequenceDiagram
            title  Invoice Based Loan Discovery
            participant Borrower Platform (BAP)
            participant Lender Platform (BPP)
            participant Lender Form Service
            Borrower Platform (BAP)->>Lender Form Service: Get Form
            Lender Form Service-->>Borrower Platform (BAP): Form Received
            Borrower Platform (BAP)->>Lender Form Service: Form Submission
            Lender Form Service-->>Borrower Platform (BAP): Submission ID
            Borrower Platform (BAP)->>Lender Platform (BPP): search(with submissionID)
            Lender Platform (BPP)-->>Borrower Platform (BAP):ACK
            rect rgb(191, 223, 255)
            Lender Platform (BPP)->>Borrower Platform (BAP):on_search
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
            end
    reference: if any
    example:
      value:
        $ref: "../../examples/invoice-based-loans/on_search/on_search-request_1.yaml"
  - summary: Find suitable invoice based loan services.
    api: search
    details:
      - description: Explore available invoice based loan options by conducting search.
        mermaid: >-
          sequenceDiagram
            title  Invoice Based Loan Discovery
            participant Borrower Platform (BAP)
            participant Lender Platform (BPP)
            rect rgb(191, 223, 255)
            Borrower Platform (BAP)->>Lender Platform (BPP): search
            Lender Platform (BPP)-->>Borrower Platform (BAP):ACK
            end
            Lender Platform (BPP)->>Borrower Platform (BAP):on_search
    reference: if any
    example:
      value:
        $ref: "../../examples/invoice-based-loans/search/search_request_2.yaml"
  - summary: Provides a catalog of different loan products offered by a single lender for invoice based loans.
    api: on_search
    details:
      - description: The lender platform provides a comprehensive catalog of various loan types including invoice based loans.
        mermaid: >-
          sequenceDiagram
            title  Invoice Based Loan Discovery
            participant Borrower Platform (BAP)
            participant Lender Platform (BPP)
            Borrower Platform (BAP)->>Lender Platform (BPP): search
            Lender Platform (BPP)-->>Borrower Platform (BAP):ACK
            rect rgb(191, 223, 255)
            Lender Platform (BPP)->>Borrower Platform (BAP):on_search
            end
    reference: if any
    example:
      value:
        $ref: "../../examples/invoice-based-loans/on_search/on_search-request_2.yaml"
  
  - summary: The borrower chooses the invoice based loan service
    api: select
    details:
      - description: The borrower selects the specific invoice based loan service they are interested in..
        mermaid: >-
          sequenceDiagram
            title Selection
            participant Borrower Platform (BAP)
            participant Lender Platform (BPP)
            participant Lender Form Service
      
            Borrower Platform (BAP)->>Lender Form Service: Get Form(Financial Info)
            Lender Form Service-->>Borrower Platform (BAP): Form Received
            Borrower Platform (BAP)->>Lender Form Service: Form Submission
            Lender Form Service-->>Borrower Platform (BAP): Submission ID
            rect rgb(191, 223, 255) 
            Borrower Platform (BAP)->>Lender Platform (BPP): select(with submissionID)
            Lender Platform (BPP)-->>Borrower Platform (BAP):ACK
            end
            Lender Platform (BPP)->>Borrower Platform (BAP):on_select
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
    reference: if any
    example:
      value:
        $ref: "../../examples/invoice-based-loans/select/select-request-multi-offer.yaml"
  - summary: The lender sends available loan offers for the chosen invoice based loan service
    api: on_select
    details:
      - description: The lender platform responds with detailed information and the necessary application form for the selected invoice based loan service.
        mermaid: >-
          sequenceDiagram
            title  Selection
            participant Borrower Platform (BAP)
            participant Lender Platform (BPP)
            participant Lender Form Service
           
            Borrower Platform (BAP)->>Lender Form Service: Get Form(Financial Info)
            Lender Form Service-->>Borrower Platform (BAP): Form Received
            Borrower Platform (BAP)->>Lender Form Service: Form Submission
            Lender Form Service-->>Borrower Platform (BAP): Submission ID
            
            Borrower Platform (BAP)->>Lender Platform (BPP): select(with submissionID)
            Lender Platform (BPP)-->>Borrower Platform (BAP):ACK
            rect rgb(191, 223, 255) 
            Lender Platform (BPP)->>Borrower Platform (BAP):on_select
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
            end
    reference: if any
    example:
      value:
        $ref: "../../examples/invoice-based-loans/on_select/on_select-request-multi-offer-set-loan-amount.yaml" 
  - summary: The borrower can change the form provided by lender
    api: form
    details:
      - description: The borrower can reduce/change loan amount/term in the form provided by lender.
        mermaid: >-
          sequenceDiagram
            title Selection
            participant Borrower Platform (BAP)
            participant Lender Platform (BPP)
            participant Lender Form Service
            rect rgb(191, 223, 255) 
            Borrower Platform (BAP)->>Lender Form Service: Get Form(Loan amount)
            Lender Form Service-->>Borrower Platform (BAP): Form Received
            Borrower Platform (BAP)->>Lender Form Service: Form Submission
            Lender Form Service-->>Borrower Platform (BAP): Submission ID
            end
            Borrower Platform (BAP)->>Lender Platform (BPP): select(with submissionID)
            Lender Platform (BPP)-->>Borrower Platform (BAP):ACK
           
            Lender Platform (BPP)->>Borrower Platform (BAP):on_select
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK    
    reference: if any
    example:
      value: 
        $ref: ../../examples/invoice-based-loans/forms/invoice-based-loans-set-loan-amount.html
  - summary: The borrower chooses the invoice based loan service.
    api: select
    details:
      - description: The borrower selects the specific invoice based loan service they are interested in.
        mermaid: >-
          sequenceDiagram
            title Selection
            participant Borrower Platform (BAP)
            participant Lender Platform (BPP)
            participant Lender Form Service
            Borrower Platform (BAP)->>Lender Form Service: Get Form(Loan amount)
            Lender Form Service-->>Borrower Platform (BAP): Form Received
            Borrower Platform (BAP)->>Lender Form Service: Form Submission
            Lender Form Service-->>Borrower Platform (BAP): Submission ID
            rect rgb(191, 223, 255) 
            Borrower Platform (BAP)->>Lender Platform (BPP): select(with submissionID)
            Lender Platform (BPP)-->>Borrower Platform (BAP):ACK
            end
            Lender Platform (BPP)->>Borrower Platform (BAP):on_select
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
    reference: if any
    example:
      value:
        $ref: "../../examples/invoice-based-loans/select/select-request-multi-offer-set-loan-amount.yaml"
  - summary: The lender sends available loan offers for the chosen invoice based loan service.
    api: on_select
    details:
      - description: The lender platform responds with detailed information and the necessary application form for the selected invoice based loan service.
        mermaid: >-
          sequenceDiagram
            title  Selection
            participant Borrower Platform (BAP)
            participant Lender Platform (BPP)
            participant Lender Form Service
            Borrower Platform (BAP)->>Lender Form Service: Get Form(Loan amount)
            Lender Form Service-->>Borrower Platform (BAP): Form Received
            Borrower Platform (BAP)->>Lender Form Service: Form Submission
            Lender Form Service-->>Borrower Platform (BAP): Submission ID 
            Borrower Platform (BAP)->>Lender Platform (BPP): select(with submissionID)
            Lender Platform (BPP)-->>Borrower Platform (BAP):ACK
            rect rgb(191, 223, 255)
            Lender Platform (BPP)->>Borrower Platform (BAP):on_select
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
            end
    reference: if any
    example:
      value:
        $ref: "../../examples/invoice-based-loans/on_select/on_select-request-kyc-form.yaml" 
  - summary: The lender invoked the relevant forms like links for KYC, bank details, UDYAM, e-mandate etc.
    api: form
    details:
      - description: The lender platform sends the form to collect Know Your Customer (KYC) details from the borrower.
        mermaid: >-
          sequenceDiagram
            title Initializing Order
            participant Borrower Platform (BAP)
            participant Lender Platform (BPP)
            participant Lender Form Service
            rect rgb(191, 223, 255)
            Borrower Platform (BAP)->>Lender Form Service: Get Form(KYC)
            Lender Form Service-->>Borrower Platform (BAP): Form Received
            Borrower Platform (BAP)->>Lender Form Service: Form Submission
            Lender Form Service-->>Borrower Platform (BAP): Submission ID
            end
            Borrower Platform (BAP)->>Lender Platform (BPP): init(with submissionID)
            Lender Platform (BPP)-->>Borrower Platform (BAP):ACK
            Lender Platform (BPP)->>Borrower Platform (BAP):on_init
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
    reference: if any
    example:
      value: 
        $ref: ../../examples/invoice-based-loans/forms/invoice-based-loans-individual-kyc.html
  - summary: The borrower initiates the invoice based loan request by filling the form.
    api: init
    details:
      - description: The borrower platform initiates the invoice based loan request by filling the form such as KYC detals, bank details, UDYAM and e-madate.
        mermaid: >-
          sequenceDiagram
            title Initializing Order
            participant Borrower Platform (BAP)
            participant Lender Platform (BPP)
            participant Lender Form Servicex
            Borrower Platform (BAP)->>Lender Form Service: Get Form(KYC)
            Lender Form Service-->>Borrower Platform (BAP): Form Received
            Borrower Platform (BAP)->>Lender Form Service: Form Submission
            Lender Form Service-->>Borrower Platform (BAP): Submission ID
            rect rgb(191, 223, 255)
            Borrower Platform (BAP)->>Lender Platform (BPP): init(with submissionID)
            Lender Platform (BPP)-->>Borrower Platform (BAP):ACK
            end
            Lender Platform (BPP)->>Borrower Platform (BAP):on_init
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK   
    reference: if any
    example: 
      value:
        $ref: "../../examples/invoice-based-loans/init/init-request-multi-offer-individual-kyc-approved.yaml"
  - summary: The lender accepts the invoice based loan request and displays loan status details and requests for loan dispach account details.
    api: on_init
    details:
      - description: The lender platform accepts the borrower's request terms and and displays loan status details amd may include additional terms if any.
        mermaid: >-
          sequenceDiagram
            title Initializing Order
            participant Borrower Platform (BAP)
            participant Lender Platform (BPP)
            participant Lender Form Service
            Borrower Platform (BAP)->>Lender Form Service: Get Form(KYC)
            Lender Form Service-->>Borrower Platform (BAP): Form Received
            Borrower Platform (BAP)->>Lender Form Service: Form Submission
            Lender Form Service-->>Borrower Platform (BAP): Submission ID
            Borrower Platform (BAP)->>Lender Platform (BPP): init(with submissionID)
            Lender Platform (BPP)-->>Borrower Platform (BAP):ACK
            rect rgb(191, 223, 255)
            Lender Platform (BPP)->>Borrower Platform (BAP):on_init
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
            end
    reference: if any
    example:
      value:
        $ref: "../../examples/invoice-based-loans/on_init/on_init-request-multi-offer-entity-kyc-form.yaml" 
    
  - summary: Get the Entity Kyc Info based loan form
    api: form
    details:
      - description: Provider platform sends the form for Entity Kyc Info based loan.
        mermaid: >-
          sequenceDiagram
            title Initializing Order
            participant Borrower Platform (BAP)
            participant Lender Platform (BPP)
            participant Lender Form Service
            rect rgb(191, 223, 255)
            Borrower Platform (BAP)->>Lender Form Service: Get Form(KYC)
            Lender Form Service-->>Borrower Platform (BAP): Form Received
            Borrower Platform (BAP)->>Lender Form Service: Form Submission
            Lender Form Service-->>Borrower Platform (BAP): Submission ID
            end
            Borrower Platform (BAP)->>Lender Platform (BPP): init(with submissionID)
            Lender Platform (BPP)-->>Borrower Platform (BAP):ACK
            Lender Platform (BPP)->>Borrower Platform (BAP):on_init
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
    reference: if any
    example:
      value: 
        $ref: ../../examples/invoice-based-loans/forms/invoice-based-loans-entity-kyc.html
  - summary: Submission of Additional Information and requesting for offer (Entity Kyc)
    api: init
    details:
      - description: BAP submits the additional information that was requested by the BPP in the XInput form.
        mermaid: >-
          sequenceDiagram
            title  Initializing Order
            participant Borrower Platform (BAP)
            participant Lender Platform (BPP)
            participant Lender Form Service
            Borrower Platform (BAP)->>Lender Form Service: Get Form(KYC)
            Lender Form Service-->>Borrower Platform (BAP): Form Received
            Borrower Platform (BAP)->>Lender Form Service: Form Submission
            Lender Form Service-->>Borrower Platform (BAP): Submission ID
            rect rgb(191, 223, 255)
            Borrower Platform (BAP)->>Lender Platform (BPP): init(with submissionID)
            Lender Platform (BPP)-->>Borrower Platform (BAP):ACK
            end
            Lender Platform (BPP)->>Borrower Platform (BAP):on_init
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
    reference: if any
    example: 
      value:
        $ref: "../../examples/invoice-based-loans/init/init-request-entity-kyc-approved.yaml"
  - summary: Lender makes an offer with repayment terms
    api: on_init
    details:
      - description: Provider platform accepts the terms of order and appends its own terms and responds with the final draft
        mermaid: >-
          sequenceDiagram
            title  Initializing Order
            participant Borrower Platform (BAP)
            participant Lender Platform (BPP)
            participant Lender Form Service
            Borrower Platform (BAP)->>Lender Form Service: Get Form(KYC)
            Lender Form Service-->>Borrower Platform (BAP): Form Received
            Borrower Platform (BAP)->>Lender Form Service: Form Submission
            Lender Form Service-->>Borrower Platform (BAP): Submission ID
            Borrower Platform (BAP)->>Lender Platform (BPP): init(with submissionID)
            Lender Platform (BPP)-->>Borrower Platform (BAP):ACK
            rect rgb(191, 223, 255)
            Lender Platform (BPP)->>Borrower Platform (BAP):on_init
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
            end
    reference: if any
    example:
      value:
        $ref: "../../examples/invoice-based-loans/on_init/on_init-request-bank-account-mandate-form.yaml" 
  - summary: Get the Account details based loan form
    api: form
    details:
      - description: Provider platform sends the form for Account details based loan.
        mermaid: >-
          sequenceDiagram
            title  Initializing Order
            participant Borrower Platform (BAP)
            participant Lender Platform (BPP)
            participant Lender Form Service
            rect rgb(191, 223, 255)
            Borrower Platform (BAP)->>Lender Form Service: Get Form(Account Details)
            Lender Form Service-->>Borrower Platform (BAP): Form Received
            Borrower Platform (BAP)->>Lender Form Service: Form Submission
            Lender Form Service-->>Borrower Platform (BAP): Submission ID
            end
            Borrower Platform (BAP)->>Lender Platform (BPP): init(with submissionID)
            Lender Platform (BPP)-->>Borrower Platform (BAP):ACK
            Lender Platform (BPP)->>Borrower Platform (BAP):on_init
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
            
    reference: if any
    example:
      value: 
        $ref: ../../examples/invoice-based-loans/forms/invoice-based-loans-account-details.html
  - summary: Submission of Additional Information and requesting for offer (Account Info)
    api: init
    details:
      - description: BAP submits the additional information that was requested by the BPP in the XInput form.
        mermaid: >-
          sequenceDiagram
            title Initializing Order
            participant Borrower Platform (BAP)
            participant Lender Platform (BPP)
            participant Lender Form Service
            Borrower Platform (BAP)->>Lender Form Service: Get Form(Account Details)
            Lender Form Service-->>Borrower Platform (BAP): Form Received
            Borrower Platform (BAP)->>Lender Form Service: Form Submission
            Lender Form Service-->>Borrower Platform (BAP): Submission ID
            rect rgb(191, 223, 255)
            Borrower Platform (BAP)->>Lender Platform (BPP): init(with submissionID)
            Lender Platform (BPP)-->>Borrower Platform (BAP):ACK
            end
            Lender Platform (BPP)->>Borrower Platform (BAP):on_init
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
    reference: if any
    example: 
      value:
        $ref: "../../examples/invoice-based-loans/init/init-request-account-info-complete.yaml"
  #add on_init & init for consent
  - summary: The lender accepts the personal loan request and displays loan status details and requests for e-mandate details.
    api: on_init
    details:
      - description: Provider platform accepts the terms of order and appends its own terms and responds with the final draft
        mermaid: >-
          sequenceDiagram
            title  Initializing Order
            participant Borrower Platform (BAP)
            participant Lender Platform (BPP)
            Borrower Platform (BAP)->>Lender Platform (BPP): init(with submissionID)
            Lender Platform (BPP)-->>Borrower Platform (BAP):ACK
            rect rgb(191, 223, 255)
            Lender Platform (BPP)->>Borrower Platform (BAP):on_init
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
            end
    reference: if any
    example:
      value:
        $ref: "../../examples/invoice-based-loans/on_init/on_init-request-emandate.yaml" 
  
  - summary: The borrower will be redirected to the e-mandate details form
    api: form
    details:
      - description: The lender platform sends the form to get dispachment e-mandate details from the consumer.
        mermaid: >-
          sequenceDiagram
            title  Order Confirmation
            participant Borrower Platform (BAP)
            participant Lender Platform (BPP)
            participant Lender Form Service
            rect rgb(191, 223, 255)
            Borrower Platform (BAP)->>Lender Form Service: Get Form(e-mandate)
            Lender Form Service-->>Borrower Platform (BAP): Form Received
            Borrower Platform (BAP)->>Lender Form Service: Form Submission
            Lender Form Service-->>Borrower Platform (BAP): Submission ID
            end
            Borrower Platform (BAP)->>Lender Platform (BPP): confirm(with submissionID)
            Lender Platform (BPP)-->>Borrower Platform (BAP):ACK
            Lender Platform (BPP)->>Borrower Platform (BAP):on_confirm
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
    reference: if any
    example:
      value: 
        $ref: ../../examples/invoice-based-loans/forms/emandate.html
  
  - summary: Submission of Additional Information and requesting for offer (Loan Agreement)
    api: init
    details:
      - description: BAP submits the additional information that was requested by the BPP in the XInput form.
        mermaid: >-
          sequenceDiagram
            title  Initializing Order
            participant Borrower Platform (BAP)
            participant Lender Platform (BPP)
            participant Lender Form Service
            Borrower Platform (BAP)->>Lender Form Service: Get Form(e-mandate)
            Lender Form Service-->>Borrower Platform (BAP): Form Received
            Borrower Platform (BAP)->>Lender Form Service: Form Submission
            Lender Form Service-->>Borrower Platform (BAP): Submission ID
            rect rgb(191, 223, 255)
            Borrower Platform (BAP)->>Lender Platform (BPP): init(with submissionID)
            Lender Platform (BPP)-->>Borrower Platform (BAP):ACK
            end
            Lender Platform (BPP)->>Borrower Platform (BAP):on_init
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
    reference: if any
    example: 
      value:
        $ref: "../../examples/invoice-based-loans/init/init-request-loan-aggrement.yaml"
  
  - summary: Lender makes an offer with repayment terms
    api: on_init
    details:
      - description: Provider platform accepts the terms of order and appends its own terms and responds with the final draft
        mermaid: >-
          sequenceDiagram
            title  Initializing Order
            participant Borrower Platform (BAP)
            participant Lender Platform (BPP)
            participant Lender Form Service
            Borrower Platform (BAP)->>Lender Form Service: Get Form(e-mandate)
            Lender Form Service-->>Borrower Platform (BAP): Form Received
            Borrower Platform (BAP)->>Lender Form Service: Form Submission
            Lender Form Service-->>Borrower Platform (BAP): Submission ID
            Borrower Platform (BAP)->>Lender Platform (BPP): init(with submissionID)
            Lender Platform (BPP)-->>Borrower Platform (BAP):ACK
            rect rgb(191, 223, 255)
            Lender Platform (BPP)->>Borrower Platform (BAP):on_init
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
            end
    reference: if any
    example:
      value:
        $ref: "../../examples/invoice-based-loans/on_init/on_init-request-loan-agreement-form.yaml" 
  - summary: The borrower receives the loan agreement details form.
    api: form
    details:
      - description: The lender platform sends the form to collect e-sign on loan agreement from the borrower.
        mermaid: >-
          sequenceDiagram
            title  Order Confirmation
            participant Borrower Platform (BAP)
            participant Lender Platform (BPP)
            participant Lender Form Service
            rect rgb(191, 223, 255)
            Borrower Platform (BAP)->>Lender Form Service: Get Form(Loan agreement)
            Lender Form Service-->>Borrower Platform (BAP): Form Received
            Borrower Platform (BAP)->>Lender Form Service: Form Submission
            Lender Form Service-->>Borrower Platform (BAP): Submission ID
            end
            Borrower Platform (BAP)->>Lender Platform (BPP): confirm(with submissionID)
            Lender Platform (BPP)-->>Borrower Platform (BAP):ACK
            Lender Platform (BPP)->>Borrower Platform (BAP):on_confirm
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
    reference: if any
    example:
      value: 
        $ref: ../../examples/invoice-based-loans/forms/invoice-based-loans-loan-agreement.html
  - summary: Borrower confirms Loan and authorizes lender to disburse loan.
    api: confirm
    details:
      - description: The borrower acknowledges and validates the loan request, providing explicit consent to the lender to proceed with disbursing the invoice based loan amount according to the agreed-upon terms and conditions.
        mermaid: >-
          sequenceDiagram
            title Order Confirmation
            participant Borrower Platform (BAP)
            participant Lender Platform (BPP)
            participant Lender Form Service
            Borrower Platform (BAP)->>Lender Form Service: Get Form(Loan agreement)
            Lender Form Service-->>Borrower Platform (BAP): Form Received
            Borrower Platform (BAP)->>Lender Form Service: Form Submission
            Lender Form Service-->>Borrower Platform (BAP): Submission ID
            rect rgb(191, 223, 255)
            Borrower Platform (BAP)->>Lender Platform (BPP): confirm(with submissionID)
            Lender Platform (BPP)-->>Borrower Platform (BAP):ACK
            end
            Lender Platform (BPP)->>Borrower Platform (BAP):on_confirm
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
    reference: if any
    example:
      value:
        $ref: "../../examples/invoice-based-loans/confirm/confirm-request.yaml"         
  - summary: Validates the borrower's loan application and approves the invoice based loan.
    api: on_confirm
    details:
      - description: Lender platform verifies the application and grants approval for the invoice based loan. Upon successful validation, the lender proceeds with the loan disbursement process.
        mermaid: >-
          sequenceDiagram
            title Order Confirmation
            participant Borrower Platform (BAP)
            participant Lender Platform (BPP)
            participant Lender Form Service
            Borrower Platform (BAP)->>Lender Form Service: Get Form(Loan agreement)
            Lender Form Service-->>Borrower Platform (BAP): Form Received
            Borrower Platform (BAP)->>Lender Form Service: Form Submission
            Lender Form Service-->>Borrower Platform (BAP): Submission ID
            Borrower Platform (BAP)->>Lender Platform (BPP): confirm(with submissionID)
            Lender Platform (BPP)-->>Borrower Platform (BAP):ACK
            rect rgb(191, 223, 255)
            Lender Platform (BPP)->>Borrower Platform (BAP):on_confirm
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
            end
    reference: if any
    example:
      value:
        $ref: "../../examples/invoice-based-loans/on_confirm/on_confirm-request.yaml" 
  #consent-handler flow
  - summary: The provider platform updates the consumer.
    api: on_update
    details:
      - description: The provider platform updates the consumer with on_update request response.
        mermaid: >-
          sequenceDiagram
            title Order Fulfillment
            participant Borrower Platform (BAP)
            participant Lender Platform (BPP)
            rect rgb(191, 223, 255)
            Lender Platform (BPP)->>Borrower Platform (BAP):on_update
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
            end
            Borrower Platform (BAP)->>Lender Platform (BPP): update-Request
            Lender Platform (BPP)-->>Borrower Platform (BAP):ACK
            Lender Platform (BPP)->>Borrower Platform (BAP):on_update
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
    reference: if any
    example:
      value:
        $ref: "../../examples/invoice-based-loans/on_update/on_update-request-consent.yaml" 
  - summary: The borrower (BAP) sends the update request by sending the order ID.
    api: update
    details:
      - description: The borrower (BAP) sends the update request by sending the order ID to be updated along with the object in the order to be updated as update_target.
        mermaid: >-
          sequenceDiagram
            title Order Fulfillment
            participant Borrower Platform (BAP)
            participant Lender Platform (BPP)
            Lender Platform (BPP)->>Borrower Platform (BAP):on_update
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
            rect rgb(191, 223, 255)
            Borrower Platform (BAP)->>Lender Platform (BPP): update-Request
            Lender Platform (BPP)-->>Borrower Platform (BAP):ACK
            end
            Lender Platform (BPP)->>Borrower Platform (BAP):on_update
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
           
    reference: if any
    example:
      value:
        $ref: "../../examples/invoice-based-loans/update/update-request-consent-approved.yaml" 
  - summary: The provider platform updates the consumer.
    api: on_update
    details:
      - description: The provider platform updates the consumer with on_update request response.
        mermaid: >-
          sequenceDiagram
            title Order Fulfillment
            participant Borrower Platform (BAP)
            participant Lender Platform (BPP)
            Lender Platform (BPP)->>Borrower Platform (BAP):on_update
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
            Borrower Platform (BAP)->>Lender Platform (BPP): update-Request
            Lender Platform (BPP)-->>Borrower Platform (BAP):ACK
            rect rgb(191, 223, 255)
            Lender Platform (BPP)->>Borrower Platform (BAP):on_update
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
            end
           
    reference: if any
    example:
      value:
        $ref: "../../examples/invoice-based-loans/on_update/on_update-request-disbursed.yaml"
  
  
  
  - summary: The borrower seeks the most recent loan status update.
    api: status
    details:
      - description: The borrower platform requests the lender platform to provide the latest status of the invoice based loan application.
        mermaid: >-
          sequenceDiagram
            title MF Ordering - Order Fulfillment
            participant Borrower Platform (BAP)
            participant Lender Platform (BPP)
            rect rgb(191, 223, 255)
            Borrower Platform (BAP)->>Lender Platform (BPP): status-Request loan application status
            Lender Platform (BPP)-->>Borrower Platform (BAP):ACK
            end
            Lender Platform (BPP)->>Borrower Platform (BAP):on_status - Provide loan application status
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
            Lender Platform (BPP)->>Borrower Platform (BAP):on_status - Provide loan application status(1)
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
            Lender Platform (BPP)->>Borrower Platform (BAP):on_status - Provide loan application status(2)
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
            Lender Platform (BPP)->>Borrower Platform (BAP):on_status - Provide loan application status(3)
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
    reference: if any
    example:
      value:
        $ref: "../../examples/invoice-based-loans/status/status-request.yaml" 
  - summary: Lender provides the borrower with real-time updates on their invoice based loan after receiving the Equated Monthly Installments (EMI).
    api: on_status
    details:
      - description: When the lender receives the Equated Monthly Installments (EMI) from the borrower, the on_status API delivers prompt updates to the borrower. These updates include the current status of the invoice based loan, ensuring transparency and keeping the borrower informed throughout the loan repayment process.
        mermaid: &onStatus >-
          sequenceDiagram
            title MF Ordering - Order Fulfillment
            participant Borrower Platform (BAP)
            participant Lender Platform (BPP)
            Borrower Platform (BAP)->>Lender Platform (BPP): status-Request loan application status
            Lender Platform (BPP)-->>Borrower Platform (BAP):ACK
            rect rgb(191, 223, 255)
            Lender Platform (BPP)->>Borrower Platform (BAP):on_status - Provide loan application status
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
            end
            Lender Platform (BPP)->>Borrower Platform (BAP):on_status - Provide loan application status(1)
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
            Lender Platform (BPP)->>Borrower Platform (BAP):on_status - Provide loan application status(2)
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
            Lender Platform (BPP)->>Borrower Platform (BAP):on_status - Provide loan application status(3)
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
    example:
      value:
        $ref: "../../examples/invoice-based-loans/on_status/on_status-request.yaml"            
  - summary: Lender provides the borrower with real-time updates on their invoice based loan after each EMI payment.
    api: on_status
    details:
      - description: When the lender receives the Equated Monthly Installments (EMI) from the borrower, the on_status API delivers prompt updates to the borrower. These updates include the current status of the invoice based loan, ensuring transparency and keeping the borrower informed throughout the loan repayment process.
        mermaid: >-
          sequenceDiagram
            title MF Ordering - Order Fulfillment
            participant Borrower Platform (BAP)
            participant Lender Platform (BPP)
            Borrower Platform (BAP)->>Lender Platform (BPP): status-Request loan application status
            Lender Platform (BPP)-->>Borrower Platform (BAP):ACK
            
            Lender Platform (BPP)->>Borrower Platform (BAP):on_status - Provide loan application status
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
            rect rgb(191, 223, 255)
            Lender Platform (BPP)->>Borrower Platform (BAP):on_status - Provide loan application status(1)
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
            end
            Lender Platform (BPP)->>Borrower Platform (BAP):on_status - Provide loan application status(2)
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
            Lender Platform (BPP)->>Borrower Platform (BAP):on_status - Provide loan application status(3)
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
    example:
      value:
        $ref: "../../examples/invoice-based-loans/on_status/on_status-request-after-installment.yaml"                                     
  
  - summary: Lender provides the borrower with real-time updates on their invoice based loan after full EMI payment.
    api: on_status
    details:
      - description: When the lender receives the full payment for Equated Monthly Installments (EMI) from the borrower, the on_status API delivers prompt updates to the borrower. These updates include the current status of the invoice based loan, ensuring transparency and keeping the borrower informed throughout the loan repayment process.
        mermaid: >-
          sequenceDiagram
            title MF Ordering - Order Fulfillment
            participant Borrower Platform (BAP)
            participant Lender Platform (BPP)
            Borrower Platform (BAP)->>Lender Platform (BPP): status-Request loan application status
            Lender Platform (BPP)-->>Borrower Platform (BAP):ACK
            Lender Platform (BPP)->>Borrower Platform (BAP):on_status - Provide loan application status
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
            Lender Platform (BPP)->>Borrower Platform (BAP):on_status - Provide loan application status(1)
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
            Lender Platform (BPP)->>Borrower Platform (BAP):on_status - Provide loan application status(2)
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
            rect rgb(191, 223, 255)
            Lender Platform (BPP)->>Borrower Platform (BAP):on_status - Provide loan application status(3)
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
            end
    example:
      value:
        $ref: "../../examples/invoice-based-loans/on_status/on_status-request-full-repayment.yaml"