summary: Mutual funds
details:
  - description: Discovery of Funds
    mermaid: >-
      sequenceDiagram
        title MF Discovery
        Participant Investment Platform
        Participant Gateway
        Participant Fund Aggregator
        Participant Direct Fund 1
        Investment Platform ->> Gateway: search
        Gateway ->> Fund Aggregator: search
        Gateway ->> Direct Fund 1: search
        Fund Aggregator ->>  Investment Platform : on_search
        Direct Fund 1 ->>  Investment Platform : on_search
        Fund Aggregator ->>  Investment Platform : form
        Direct Fund 1 ->>  Investment Platform : form
  - description: Ordering
    mermaid: >-
      sequenceDiagram
        title MF Ordering - Selection
        Participant Investment Platform
        Participant Fund Aggregator / Direct Fund
        Investment Platform ->> Fund Aggregator / Direct Fund: select
        Fund Aggregator / Direct Fund ->>  Investment Platform : on_select
        Fund Aggregator / Direct Fund ->>  Investment Platform : form (Kyc)
  - description: Initializing the order  
    mermaid: >-
            sequenceDiagram
              title MF Ordering - Initializing Order
              Participant Investment Platform
              Participant Fund Aggregator / Direct Fund
              Investment Platform ->> Fund Aggregator / Direct Fund: init - BAP sends consumer ID, <br/> billing details
              Fund Aggregator / Direct Fund ->>  Investment Platform : on_init - BPP sends final quote, <br/> payment terms, and other form urls
              Fund Aggregator / Direct Fund ->>  Investment Platform : form (Account Info) 
  - description: Order Confirmation
    mermaid: >-
      sequenceDiagram
        title MF Ordering - Order Confirmation
        Participant Investment Platform
        Participant Fund Aggregator / Direct Fund
        Investment Platform ->> Fund Aggregator / Direct Fund: confirm - BAP sends proof or payment, acceptance of T&Cs 
        Fund Aggregator / Direct Fund ->>  Investment Platform : on_confirm - BPP sends confirmed order with order ID and latest fulfillment state
  - description: Fulfillment
    mermaid: >-
      sequenceDiagram
        title MF Ordering - Order Fulfillment
        Participant Investment Platform
        Participant Fund Aggregator / Direct Fund
        Investment Platform ->> Fund Aggregator / Direct Fund: status - BAP request for latest status   
        Fund Aggregator / Direct Fund ->>  Investment Platform : on_status - BPP sends order details with latest updated context

references: if any
steps:
  - summary: Explore available Mutual Fund options over the network.
    api: search
    details:
      - description: Conduct searches over the network to discover a variety of Mutual Fund investment opportunities.
        mermaid: >-
          sequenceDiagram
            title MF Discovery
            Participant Investment Platform
            Participant Gateway
            Participant Fund Aggregator
            Participant Direct Fund 1
            rect rgb(191, 223, 255)
              Investment Platform ->> Gateway: search
              Gateway ->> Fund Aggregator: search
              Gateway ->> Direct Fund 1: search
            end
            Fund Aggregator ->>  Investment Platform : on_search
            Direct Fund 1 ->>  Investment Platform : on_search
    reference: if any
    example:
      value:
        $ref: "../../examples/mutual-funds/search/search-request-mf.yaml"
  - summary: Receive a catalog of different Mutual Fund products offered by providers.
    api: on_search
    details:
      - description: Platform provides a comprehensive catalog of various Mutual Fund products from different providers, tailored to your investment needs.
        mermaid:  >- 
          sequenceDiagram
            title MF Discovery
            Participant Investment Platform
            Participant Gateway
            Participant Fund Aggregator
            Participant Direct Fund 1
            Investment Platform ->> Gateway: search
            Gateway ->> Fund Aggregator: search
            Gateway ->> Direct Fund 1: search
            rect rgb(191, 223, 255)
            Fund Aggregator ->>  Investment Platform : on_search
            Direct Fund 1 ->>  Investment Platform : on_search
            end
    reference: if any
    example:
      value:
        $ref: "../../examples/mutual-funds/on_search/on_search-request.yaml"

# sip select on_select
  - summary: Choose a specific Mutual Fund product for investment.
    api: select
    details:
      - description: Select the Mutual Fund product that aligns with your investment preferences and goals.
        mermaid: &select >-
          sequenceDiagram
            title MF Ordering - Selection
            Participant Investment Platform
            Participant Fund Aggregator / Direct Fund
            rect rgb(191, 223, 255)
            Investment Platform ->> Fund Aggregator / Direct Fund: select
            end
            Fund Aggregator / Direct Fund ->>  Investment Platform : on_select
            Fund Aggregator / Direct Fund ->>  Investment Platform : form
    reference: if any
    example:
      value:
        $ref: "../../examples/mutual-funds/select/select-request-sip.yaml"
  - summary: Receive detailed information and a consent request for the chosen Mutual Fund product.
    api: on_select
    details:
      - description: Provider generates a consent request and provides additional information specific to the selected Mutual Fund product, catering to your investment decision.
        mermaid: &onSelect >-
          sequenceDiagram
            title MF Ordering - Selection
            Participant Investment Platform
            Participant Fund Aggregator / Direct Fund
            Investment Platform ->> Fund Aggregator / Direct Fund: select
            rect rgb(191, 223, 255)
            Fund Aggregator / Direct Fund ->>  Investment Platform : on_select
            end
            Fund Aggregator / Direct Fund ->>  Investment Platform : form
    reference: if any
    example:
      value:
        $ref: "../../examples/mutual-funds/on_select/on_select-request-sip.yaml"      
  - summary: Get the SIP setup form
    api: form
    details:
      - description: Provider platform sends the form for SIP setup.
        mermaid: &selectForm >-
            sequenceDiagram
              title MF Ordering - Selection
              Participant Investment Platform
              Participant Fund Aggregator / Direct Fund
              Investment Platform ->> Fund Aggregator / Direct Fund: select
              Fund Aggregator / Direct Fund ->>  Investment Platform : on_select
              rect rgb(191, 223, 255)
              Fund Aggregator / Direct Fund ->>  Investment Platform : form
              end
    reference: if any
    example:
      value: 
        $ref: ../../examples/mutual-funds/forms/mutual-funds-sip-setup.html

# lumpsum select on_select
  - summary: Choose a specific Mutual Fund product for investment.
    api: select
    details:
      - description: Select the Mutual Fund product that aligns with your investment preferences and goals.
        mermaid: *select
    reference: if any
    example:
      value:
        $ref: "../../examples/mutual-funds/select/select-request-sip_1.yaml"
  - summary: Receive detailed information and a consent request for the chosen Mutual Fund product.
    api: on_select
    details:
      - description: Provider generates a consent request and provides additional information specific to the selected Mutual Fund product, catering to your investment decision.
        mermaid: *onSelect
    reference: if any
    example:
      value:
        $ref: "../../examples/mutual-funds/on_select/on_select-request-sip_1.yaml"      
  - summary: Get the Kyc form
    api: form
    details:
      - description: Provider platform sends the form for Kyc.
        mermaid: *selectForm
    reference: if any
    example:
      value: 
        $ref: ../../examples/mutual-funds/forms/mutual-funds-kyc.html


  #sip init on_init
  - summary: Submit additional information and initiate the Mutual Fund investment request.
    api: init
    details:
      - description: Provide the required additional information as requested and initiate the process for the chosen Mutual Fund investment.
        mermaid: >-
            sequenceDiagram
              title MF Ordering - Initializing Order
              Participant Investment Platform
              Participant Fund Aggregator / Direct Fund
              rect rgb(191, 223, 255)
              Investment Platform ->> Fund Aggregator / Direct Fund: init - BAP sends consumer ID, <br/> billing details
              end
              Fund Aggregator / Direct Fund ->>  Investment Platform : on_init - BPP sends final quote, <br/> payment terms, and other form urls
              Fund Aggregator / Direct Fund ->>  Investment Platform : form (Account Info)
    reference: if any
    example: 
      value:
        $ref: "../../examples/mutual-funds/init/init-request-sip-account-info.yaml"
  - summary: Receive the final investment offer and terms after submitting additional information.
    api: on_init
    details:
      - description: Provider responds with the final draft of the investment offer, including terms and conditions, based on the information provided during the initiation.
        mermaid: >-
            sequenceDiagram
              title MF Ordering - Initializing Order
              Participant Investment Platform
              Participant Fund Aggregator / Direct Fund
              Investment Platform ->> Fund Aggregator / Direct Fund: init - BAP sends consumer ID, <br/> billing details
              rect rgb(191, 223, 255)
              Fund Aggregator / Direct Fund ->>  Investment Platform : on_init - BPP sends final quote, <br/> payment terms, and other form urls
              end
              Fund Aggregator / Direct Fund ->>  Investment Platform : form (Account Info)
    reference: if any
    example:
      value:
        $ref: "../../examples/mutual-funds/on_init/on_init-request-sip-account-info.yaml" 
  - summary: Get the Mutual fund account info form
    api: form
    details:
      - description: Provider platform sends the form for Mutual fund account info.
        mermaid: >-
              sequenceDiagram
                title MF Ordering - Initializing Order
                Participant Investment Platform
                Participant Fund Aggregator / Direct Fund
                Investment Platform ->> Fund Aggregator / Direct Fund: init - BAP sends consumer ID, <br/> billing details
                Fund Aggregator / Direct Fund ->>  Investment Platform : on_init - BPP sends final quote, <br/> payment terms, and other form urls
                rect rgb(191, 223, 255)
                Fund Aggregator / Direct Fund ->>  Investment Platform : form (Account Info)
                end
    reference: if any
    example:
      value: 
        $ref: ../../examples/mutual-funds/forms/mutual-funds-account-info.html

  - summary: Submit additional information and initiate the Mutual Fund investment request.
    api: init
    details:
      - description: Provide the required additional information as requested and initiate the process for the chosen Mutual Fund investment.
        mermaid: &init >-
            sequenceDiagram
              title MF Ordering - Initializing Order
              Participant Investment Platform
              Participant Fund Aggregator / Direct Fund
              rect rgb(191, 223, 255)
              Investment Platform ->> Fund Aggregator / Direct Fund: init - BAP sends consumer ID, <br/> billing details
              end
              Fund Aggregator / Direct Fund ->>  Investment Platform : on_init - BPP sends final quote, <br/> payment terms, and other form urls
              Fund Aggregator / Direct Fund ->>  Investment Platform : form (Aggrement form)
    reference: if any
    example: 
      value:
        $ref: "../../examples/mutual-funds/init/init-request-sip.yaml"
  
  - summary: Receive the final investment offer and terms after submitting additional information.
    api: on_init
    details:
      - description: Provider responds with the final draft of the investment offer, including terms and conditions, based on the information provided during the initiation.
        mermaid: &OnInit >-
            sequenceDiagram
              title MF Ordering - Initializing Order
              Participant Investment Platform
              Participant Fund Aggregator / Direct Fund
              Investment Platform ->> Fund Aggregator / Direct Fund: init - BAP sends consumer ID, <br/> billing details
              rect rgb(191, 223, 255)
              Fund Aggregator / Direct Fund ->>  Investment Platform : on_init - BPP sends final quote, <br/> payment terms, and other form urls
              end
              Fund Aggregator / Direct Fund ->>  Investment Platform : form (Aggrement form)
    reference: if any
    example:
      value:
        $ref: "../../examples/mutual-funds/on_init/on_init-request-sip-agreement.yaml" 
  - summary: Get the Mutual fund agreement form
    api: form
    details:
      - description: Provider platform sends the Mutual fund agreement form.
        mermaid: &InitForm >-
          sequenceDiagram
            title MF Ordering - Initializing Order
            Participant Investment Platform
            Participant Fund Aggregator / Direct Fund
            Investment Platform ->> Fund Aggregator / Direct Fund: init - BAP sends consumer ID, <br/> billing details
            Fund Aggregator / Direct Fund ->>  Investment Platform : on_init - BPP sends final quote, <br/> payment terms, and other form urls
            rect rgb(191, 223, 255)
            Fund Aggregator / Direct Fund ->>  Investment Platform : form (Aggrement form)
            end
    reference: if any
    example:
      value: 
        $ref: ../../examples/mutual-funds/forms/mutual-funds-agreement.html


  

  

  - summary: Confirm the Mutual Fund investment and authorize the provider to proceed.
    api: confirm
    details:
      - description: Confirm your investment decision and provide explicit authorization for the provider to proceed with the chosen Mutual Fund investment.
        mermaid: >-
          sequenceDiagram
            Participant Investment Platform
            Participant Fund Aggregator / Direct Fund
            rect rgb(191, 223, 255)
            Investment Platform ->> Fund Aggregator / Direct Fund: confirm
            end
            Fund Aggregator / Direct Fund ->>  Investment Platform : on_confirm
    reference: if any
    example:
      value:
        $ref: "../../examples/mutual-funds/confirm/confirm-request-sip.yaml"         
  - summary: Validate and approve the Mutual Fund investment application.
    api: on_confirm
    details:
      - description: Provider validates and approves the submitted investment application for the chosen Mutual Fund, proceeding with the investment process.
        mermaid: >-
          sequenceDiagram
            Participant Investment Platform
            Participant Fund Aggregator / Direct Fund
            Investment Platform ->> Fund Aggregator / Direct Fund: confirm
            rect rgb(191, 223, 255)
            Fund Aggregator / Direct Fund ->>  Investment Platform : on_confirm
            end
    reference: if any
    example:
      value:
        $ref: "../../examples/mutual-funds/on_confirm/on_confirm-request-sip.yaml" 



  # - summary: Request real-time updates on the status of your Mutual Fund investment.
  #   api: status
  #   details:
  #     - description: Request the most recent updates regarding the status of your invested Mutual Fund, ensuring you stay informed about its progress.
  #       mermaid: >-
  #         sequenceDiagram
  #           Participant Investment Platform
  #           Participant Fund Aggregator / Direct Fund
  #           rect rgb(191, 223, 255)
  #           Investment Platform ->> Fund Aggregator / Direct Fund: status
  #           end
  #           Fund Aggregator / Direct Fund ->>  Investment Platform : on_status
  #   reference: if any
  #   example:
  #     value:
  #       $ref: "../../examples/mutual-funds/status/status-request.yaml" 
  # - summary: Receive real-time updates on your Mutual Fund investment after each milestone.
  #   api: on_status
  #   details:
  #     - description: Provider sends timely updates about your Mutual Fund investment after significant milestones, ensuring you're informed throughout the investment journey.
  #       mermaid: >-
  #         sequenceDiagram
  #           Participant Investment Platform
  #           Participant Fund Aggregator / Direct Fund
  #           Investment Platform ->> Fund Aggregator / Direct Fund: status
  #           rect rgb(191, 223, 255)
  #           Fund Aggregator / Direct Fund ->>  Investment Platform : on_status
  #           end
  #   example:
  #     value:
  #       $ref: "../../examples/mutual-funds/on_status/on_status-request-sip-installment-received.yaml" 
  
  - summary: Buyer platform sends a request to cancel order
    api: cancel
    details:
      - description: Buyer platform sends a request to cancel order.
        mermaid: >-
          sequenceDiagram
            Participant Investment Platform
            Participant Fund Aggregator / Direct Fund
            rect rgb(191, 223, 255)
            Investment Platform ->> Fund Aggregator / Direct Fund: cancel
            end
            Fund Aggregator / Direct Fund ->>  Investment Platform : on_cancel
    reference: if any
    example:
      value:
        $ref: "../../examples/mutual-funds/cancel/cancel-request.yaml" 
  - summary: Seller platform confirms the order cancellation
    api: on_cancel
    details:
      - description: Seller platform confirms the order cancellation
        mermaid: >-
          sequenceDiagram
            Participant Investment Platform
            Participant Fund Aggregator / Direct Fund
            Investment Platform ->> Fund Aggregator / Direct Fund: cancel
            rect rgb(191, 223, 255)
            Fund Aggregator / Direct Fund ->>  Investment Platform : on_cancel
            end
    example:
      value:
        $ref: "../../examples/mutual-funds/on_cancel/on_cancel-request.yaml"      