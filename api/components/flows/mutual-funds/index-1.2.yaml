summary: Mutual funds
details:
  - description: Discovery of Funds
    mermaid: >-
      sequenceDiagram
        title MF Discovery
        Participant Investment Platform
        Participant Gateway
        Participant Fund Aggregator
        Participant Direct Fund 1
        Investment Platform ->> Gateway: search
        Gateway ->> Fund Aggregator: search
        Gateway ->> Direct Fund 1: search
        Fund Aggregator ->>  Investment Platform : on_search
        Direct Fund 1 ->>  Investment Platform : on_search
        Fund Aggregator ->>  Investment Platform : form
        Direct Fund 1 ->>  Investment Platform : form
  - description: Ordering
    mermaid: >-
      sequenceDiagram
        title MF Ordering - Selection
        Participant Investment Platform
        Participant Fund Aggregator / Direct Fund
        Investment Platform ->> Fund Aggregator / Direct Fund: select
        Fund Aggregator / Direct Fund ->>  Investment Platform : on_select
        Fund Aggregator / Direct Fund ->>  Investment Platform : form (Kyc)
  - description: Initializing the order  
    mermaid: >-
            sequenceDiagram
              title MF Ordering - Initializing Order
              Participant Investment Platform
              Participant Fund Aggregator / Direct Fund
              Investment Platform ->> Fund Aggregator / Direct Fund: init - BAP sends consumer ID, <br/> billing details
              Fund Aggregator / Direct Fund ->>  Investment Platform : on_init - BPP sends final quote, <br/> payment terms, and other form urls
              Fund Aggregator / Direct Fund ->>  Investment Platform : form (Account Info) 
  - description: Order Confirmation
    mermaid: >-
      sequenceDiagram
        title MF Ordering - Order Confirmation
        Participant Investment Platform
        Participant Fund Aggregator / Direct Fund
        Investment Platform ->> Fund Aggregator / Direct Fund: confirm - BAP sends proof or payment, acceptance of T&Cs 
        Fund Aggregator / Direct Fund ->>  Investment Platform : on_confirm - BPP sends confirmed order with order ID and latest fulfillment state
  - description: Fulfillment
    mermaid: >-
      sequenceDiagram
        title MF Ordering - Order Fulfillment
        Participant Investment Platform
        Participant Fund Aggregator / Direct Fund
        Investment Platform ->> Fund Aggregator / Direct Fund: status - BAP request for latest status   
        Fund Aggregator / Direct Fund ->>  Investment Platform : on_status - BPP sends order details with latest updated context
references: if any
steps:
  - summary: Buyer app search for available mutual fund options over the network
    api: search
    details:
      - description: Buyer app explore mutual fund investment opportunities by searching for providers over the network. 
        mermaid: >-
          sequenceDiagram
            title MF Discovery
            Participant Investment Platform
            Participant Gateway
            Participant Fund Aggregator
            Participant Direct Fund 1
            rect rgb(191, 223, 255)
              Investment Platform ->> Gateway: search
              Gateway ->> Fund Aggregator: search
              Gateway ->> Direct Fund 1: search
            end
            Fund Aggregator ->>  Investment Platform : on_search
            Direct Fund 1 ->>  Investment Platform : on_search
    reference: if any
    example:
      value:
        $ref: "../../examples/mutual-funds/search/search-request-full-pull.yaml"
  - summary: Providers provides a catalog of different mutual fund products
    api: on_search
    details:
      - description: Provider sends a comprehensive catalog of various mutual fund products tailored for your investment needs.
        mermaid:  >- 
          sequenceDiagram
            title MF Discovery
            Participant Investment Platform
            Participant Gateway
            Participant Fund Aggregator
            Participant Direct Fund 1
            Investment Platform ->> Gateway: search
            Gateway ->> Fund Aggregator: search
            Gateway ->> Direct Fund 1: search
            rect rgb(191, 223, 255)
            Fund Aggregator ->>  Investment Platform : on_search
            Direct Fund 1 ->>  Investment Platform : on_search
            end
    reference: if any
    example:
      value:
        $ref: "../../examples/mutual-funds/on_search/on_search-request_1.2.yaml"
# sip select on_select
  - summary: Buyer app selects a specific mutual fund product for investment for more details
    api: select
    details:
      - description: Buyer app selects a mutual fund product that aligns with your investment preferences and goals.
        mermaid: &select >-
          sequenceDiagram
            title MF Ordering - Selection
            Participant Investment Platform
            Participant Fund Aggregator / Direct Fund
            rect rgb(191, 223, 255)
            Investment Platform ->> Fund Aggregator / Direct Fund: select
            end
            Fund Aggregator / Direct Fund ->>  Investment Platform : on_select
            Fund Aggregator / Direct Fund ->>  Investment Platform : form
    reference: if any
    example:
      value:
        $ref: "../../examples/mutual-funds/select/select-request-sip.yaml"
  - summary: Provider returns the response to selected mutual fund product
    api: on_select
    details:
      - description: Provider returns the response to selected mutual fund with SIP setup & lumpsum setup forms.
        mermaid: &onSelect >-
          sequenceDiagram
            title MF Ordering - Selection
            Participant Investment Platform
            Participant Fund Aggregator / Direct Fund
            Investment Platform ->> Fund Aggregator / Direct Fund: select
            rect rgb(191, 223, 255)
            Fund Aggregator / Direct Fund ->>  Investment Platform : on_select
            end
            Fund Aggregator / Direct Fund ->>  Investment Platform : form
    reference: if any
    example:
      value:
        $ref: "../../examples/mutual-funds/on_select/on_select-request-sip_1.2.yaml"      
  - summary: Buyer app fetches the SIP setup form
    api: form
    details:
      - description: Buyer app fetches the SIP setup form from the provider using the link provided in the previous step.
        mermaid: &selectForm >-
            sequenceDiagram
              title MF Ordering - Selection
              Participant Investment Platform
              Participant Fund Aggregator / Direct Fund
              Investment Platform ->> Fund Aggregator / Direct Fund: select
              Fund Aggregator / Direct Fund ->>  Investment Platform : on_select
              rect rgb(191, 223, 255)
              Fund Aggregator / Direct Fund ->>  Investment Platform : form
              end
    reference: if any
    example:
      value: 
        $ref: ../../examples/mutual-funds/forms/mutual-funds-sip-setup.html
  - summary: Buyer app fetches the lumpsum setup form
    api: form
    details:
      - description: Buyer app fetches the lumpsum setup form from the provider using the link provided in the previous step.
        mermaid: &selectForm >-
            sequenceDiagram
              title MF Ordering - Selection
              Participant Investment Platform
              Participant Fund Aggregator / Direct Fund
              Investment Platform ->> Fund Aggregator / Direct Fund: select
              Fund Aggregator / Direct Fund ->>  Investment Platform : on_select
              rect rgb(191, 223, 255)
              Fund Aggregator / Direct Fund ->>  Investment Platform : form
              end
    reference: if any
    example:
      value: 
        $ref: ../../examples/mutual-funds/forms/mutual-funds-lumpsum-setup.html
  - summary: Buyer app selects a mutual funds product for more details
    api: select
    details:
      - description: Buyer app selects a specific mutual fund plan that suits their needs and links the SIP setup form with submissionId.
        mermaid: *select
    reference: if any
    example:
      value:
        $ref: "../../examples/mutual-funds/select/select-request-sip_1.yaml"
  - summary: Provider returns the response to selected mutual fund product
    api: on_select
    details:
      - description: Provider responds to the buyer app requests by sending the updated quote & xinput form index.
        mermaid: *onSelect
    reference: if any
    example:
      value:
        $ref: "../../examples/mutual-funds/on_select/on_select-request-payment_1.2.yaml"      
  - summary: Buyer app fetches the payment info form (Redirection)
    api: form
    details:
      - description: Buyer app fetches the payment info form from the provider using the link provided in the previous step.
        mermaid: *selectForm
    reference: if any
    example:
      value: 
        $ref: ../../examples/mutual-funds/forms/mutual-funds-payment-info.html
  #sip init on_init
  - summary: The buyer app initiates the mutual fund investment request
    api: init
    details:
      - description: Buyer app initiates purchase of a specific mutual fund that suits their needs and links the payment info form with submission Id.
        mermaid: >-
            sequenceDiagram
              title MF Ordering - Initializing Order
              Participant Investment Platform
              Participant Fund Aggregator / Direct Fund
              rect rgb(191, 223, 255)
              Investment Platform ->> Fund Aggregator / Direct Fund: init
              end
              Fund Aggregator / Direct Fund ->>  Investment Platform : on_init
              Fund Aggregator / Direct Fund ->>  Investment Platform : form
    reference: if any
    example: 
      value:
        $ref: "../../examples/mutual-funds/init/init-request-payment-info-1.2.yaml"
  - summary: Provider returns the response to initailized mutual fund plan
    api: on_init
    details:
      - description: Provider responds with the final draft of the investment offer, including terms and conditions, based on the information provided during the initiation.
        mermaid: >-
            sequenceDiagram
              title MF Ordering - Initializing Order
              Participant Investment Platform
              Participant Fund Aggregator / Direct Fund
              Investment Platform ->> Fund Aggregator / Direct Fund: init
              rect rgb(191, 223, 255)
              Fund Aggregator / Direct Fund ->>  Investment Platform : on_init
              end
              Fund Aggregator / Direct Fund ->>  Investment Platform : form
    reference: if any
    example:
      value:
        $ref: "../../examples/mutual-funds/on_init/on_init-request-sip-agreement-1.2.yaml" 
  - summary: Buyer app fetches the mutual fund agreement form (Redirection)
    api: form
    details:
      - description: Buyer app fetches the mutual fund agreement form from the provider using the link provided in the previous step.
        mermaid: >-
              sequenceDiagram
                title MF Ordering - Initializing Order
                Participant Investment Platform
                Participant Fund Aggregator / Direct Fund
                Investment Platform ->> Fund Aggregator / Direct Fund: init - BAP sends consumer ID, <br/> billing details
                Fund Aggregator / Direct Fund ->>  Investment Platform : on_init - BPP sends final quote, <br/> payment terms, and other form urls
                rect rgb(191, 223, 255)
                Fund Aggregator / Direct Fund ->>  Investment Platform : form
                end
    reference: if any
    example:
      value: 
        $ref: ../../examples/mutual-funds/forms/mutual-funds-agreement.html
  - summary: Buyer app confirms the mutual fund investment and authorize the provider to proceed
    api: confirm
    details:
      - description: Buyer app confirms the mutual fund investment and provides all the necessary information as per the terms.
        mermaid: >-
          sequenceDiagram
            Participant Investment Platform
            Participant Fund Aggregator / Direct Fund
            rect rgb(191, 223, 255)
            Investment Platform ->> Fund Aggregator / Direct Fund: confirm
            end
            Fund Aggregator / Direct Fund ->>  Investment Platform : on_confirm
    reference: if any
    example:
      value:
        $ref: "../../examples/mutual-funds/confirm/confirm-request-1.2.yaml"         
  - summary: Provider validate and confirms the mutual fund investment application
    api: on_confirm
    details:
      - description: Provider validates and confirms the investment application for the chosen mutual fund and provides the confirmation details.
        mermaid: >-
          sequenceDiagram
            Participant Investment Platform
            Participant Fund Aggregator / Direct Fund
            Investment Platform ->> Fund Aggregator / Direct Fund: confirm
            rect rgb(191, 223, 255)
            Fund Aggregator / Direct Fund ->>  Investment Platform : on_confirm
            end
    reference: if any
    example:
      value:
        $ref: "../../examples/mutual-funds/on_confirm/on_confirm-request-1.2.yaml" 
  #on_update: payment done
  - summary: Provider provides with latest payment status (unsolicited call)
    api: on_update
    details:
      - description: Provider sends the latest payment status.
        mermaid: >-
          sequenceDiagram
            Participant Investment Platform
            Participant Fund Aggregator / Direct Fund
            rect rgb(191, 223, 255)
            Fund Aggregator / Direct Fund ->>  Investment Platform : on_update
            end
            Investment Platform ->> Fund Aggregator / Direct Fund: status
            Fund Aggregator / Direct Fund ->>  Investment Platform : on_status
    example:
      value:
        $ref: "../../examples/mutual-funds/on_update/on_update-request-1.2.yaml"
  - summary: Buyer app seeks for the real-time updates on the status of mutual fund investment
    api: status
    details:
      - description: Request the most recent updates regarding the status of your invested mutual fund ensuring you stay informed about its progress.
        mermaid: >-
          sequenceDiagram
            Participant Investment Platform
            Participant Fund Aggregator / Direct Fund
            Fund Aggregator / Direct Fund ->>  Investment Platform : on_update
            rect rgb(191, 223, 255)
            Investment Platform ->> Fund Aggregator / Direct Fund: status
            end
            Fund Aggregator / Direct Fund ->>  Investment Platform : on_status
    reference: if any
    example:
      value:
        $ref: "../../examples/mutual-funds/status/status-request.yaml" 
  - summary: Provider shares the real-time updates on your mutual fund investment after each milestone
    api: on_status
    details:
      - description: Provider sends timely updates about your mutual fund investment after significant milestones ensuring you are informed throughout the investment journey.
        mermaid: >-
          sequenceDiagram
            Participant Investment Platform
            Participant Fund Aggregator / Direct Fund
            Fund Aggregator / Direct Fund ->>  Investment Platform : on_update
            Investment Platform ->> Fund Aggregator / Direct Fund: status
            rect rgb(191, 223, 255)
            Fund Aggregator / Direct Fund ->>  Investment Platform : on_status
            end
    example:
      value:
        $ref: "../../examples/mutual-funds/on_status/on_staus-request-rta-processed-1.2.yaml" 
 
  # - summary: Buyer platform sends a request to cancel order
  #   api: cancel
  #   details:
  #     - description: Buyer platform sends a request to cancel order.
  #       mermaid: >-
  #         sequenceDiagram
  #           Participant Investment Platform
  #           Participant Fund Aggregator / Direct Fund
  #           rect rgb(191, 223, 255)
  #           Investment Platform ->> Fund Aggregator / Direct Fund: cancel
  #           end
  #           Fund Aggregator / Direct Fund ->>  Investment Platform : on_cancel
  #   reference: if any
  #   example:
  #     value:
  #       $ref: "../../examples/mutual-funds/cancel/cancel-request.yaml" 
  # - summary: Seller platform confirms the order cancellation
  #   api: on_cancel
  #   details:
  #     - description: Seller platform confirms the order cancellation
  #       mermaid: >-
  #         sequenceDiagram
  #           Participant Investment Platform
  #           Participant Fund Aggregator / Direct Fund
  #           Investment Platform ->> Fund Aggregator / Direct Fund: cancel
  #           rect rgb(191, 223, 255)
  #           Fund Aggregator / Direct Fund ->>  Investment Platform : on_cancel
  #           end
  #   example:
  #     value:
  #       $ref: "../../examples/mutual-funds/on_cancel/on_cancel-request.yaml"      